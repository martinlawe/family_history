<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="robots" content="noindex, nofollow" />
    <title>The Brown's Family History</title>
    <link rel="stylesheet" href="../style.css" />
  </head>
  <body>
    <!-- start of change log for this file-->
    <div id="hidden-log" style="display: none">
      21/08/2025 - file format changed - tree structure updated in line with
      other history files. Also tree completed to include the whole of the Brown
      family.
    </div>
    <!--End of Change Log -->
    <header>Brown Family History</header>
    <div class="nav-wrapper">
      <nav>
        <a href="../index.html">Home</a>
        <a href="The Dobson Family History.html">Dobson Family History</a>
        <a href="Vickers_family_history.html">Vickers Family History</a>
      </nav>
    </div>

    <main>
      <div class="trees-wrapper">
        <div class="trees-container" id="tree1">
          <svg id="lines-tree1"></svg>
          <div class="generation">
            <div class="row" id="row1-tree1">
              <a
                href="../people/Under_Construction.html"
                class="button-link"
                id="p1"
                >William Brown</a
              >
            </div>
          </div>
          <div class="generation">
            <div class="row" id="row2-tree1">
              <a
                href="../people/Under_Construction.html"
                class="button-link"
                id="p2"
                >William Brown (1786 - )</a
              >
            </div>
          </div>
          <div class="generation">
            <div class="row" id="row3-tree1">
              <a
                href="../people/Under_Construction.html"
                class="button-link"
                id="p3"
                >Isaac Brown (1817 - 1895)</a
              >
            </div>
          </div>
          <div class="generation">
            <div class="row" id="row4-tree1">
              <a href="../people/John_Brown.html" class="button-link" id="p4"
                >John Brown (1860 - 1918)</a
              >
            </div>
          </div>
          <div class="generation">
            <div class="row" id="row5-tree1">
              <a
                href="../people/Rachel_Louisa_Brown.html"
                class="button-link"
                id="p5"
                >Rachel Brown (1897 - 1967)</a
              >
            </div>
          </div>
          <div class="generation">
            <div class="row" id="row6-tree1">
              <a
                href="../people/Alice_Vickers.html"
                class="button-link"
                id="p6"
              >
                Alice Vickers (1925 - 2016)</a
              >

              <a
                href="../people/Albert_W_J_Vickers.html"
                class="button-link"
                id="p7"
              >
                Albert Vickers (1920 - 1994)</a
              >
            </div>
          </div>
        </div>
      </div>

      <div>
        <h3 style="text-align: center">ðŸš§ Page Under Construction</h3>
        <p>This section is currently being updated. Please check back soon.</p>
      </div>
    </main>
    <footer>
      <span class="footer-left"
        ><em>&copy; 2025 Martin Lawrence | Family History Project</em></span
      >
    </footer>
    <script>
      // Define all connections here
      // For doglegs, list each child separately but with same parent
      const connections = [
        { container: "tree1", from: "p1", to: "p2", type: "vertical" },
        { container: "tree1", from: "p2", to: "p3", type: "vertical" },
        { container: "tree1", from: "p3", to: "p4", type: "vertical" },
        { container: "tree1", from: "p4", to: "p5", type: "vertical" },
        {
          container: "tree1",
          from: "p5",
          to: ["p6", "p7"],
          type: "dogleg",
        },
      ];

      function makePath(d) {
        const path = document.createElementNS(
          "http://www.w3.org/2000/svg",
          "path"
        );
        path.setAttribute("d", d);
        path.setAttribute("stroke", "black");
        path.setAttribute("stroke-width", "2");
        path.setAttribute("fill", "none");
        return path;
      }

      function drawVerticalLine(svg, fromEl, toEl) {
        const fromRect = fromEl.getBoundingClientRect();
        const toRect = toEl.getBoundingClientRect();
        const box = svg.parentElement.getBoundingClientRect();

        const x1 = fromRect.left + fromRect.width / 2 - box.left;
        const y1 = fromRect.bottom - box.top;
        const x2 = toRect.left + toRect.width / 2 - box.left;
        const y2 = toRect.top - box.top;

        svg.appendChild(makePath(`M${x1},${y1} L${x2},${y2}`));
      }

      function drawDogleg(svg, fromEl, toEls) {
        const fromRect = fromEl.getBoundingClientRect();
        const box = svg.parentElement.getBoundingClientRect();

        const startX = fromRect.left + fromRect.width / 2 - box.left;
        const startY = fromRect.bottom - box.top;

        const toRects = toEls.map((el) => el.getBoundingClientRect());

        // run the bus just below parent, small gap
        const midY = startY + 10;

        const leftX = toRects[0].left + toRects[0].width / 2 - box.left;
        const rightX =
          toRects[toRects.length - 1].left +
          toRects[toRects.length - 1].width / 2 -
          box.left;

        // vertical from parent
        svg.appendChild(makePath(`M${startX},${startY} L${startX},${midY}`));

        // horizontal bus
        svg.appendChild(makePath(`M${leftX},${midY} L${rightX},${midY}`));

        // drops into children
        toEls.forEach((childEl) => {
          const cRect = childEl.getBoundingClientRect();
          const childX = cRect.left + cRect.width / 2 - box.left;
          const childY = cRect.top - box.top;
          svg.appendChild(makePath(`M${childX},${midY} L${childX},${childY}`));
        });
      }

      function drawAllConnections() {
        // clear each SVG once
        const uniqueContainers = [
          ...new Set(connections.map((c) => c.container)),
        ];
        uniqueContainers.forEach((container) => {
          const svg = document.getElementById(`lines-${container}`);
          if (svg) svg.innerHTML = "";
        });

        // draw everything
        connections.forEach((c) => {
          const svg = document.getElementById(`lines-${c.container}`);
          if (!svg) return;

          const fromEl = document.getElementById(c.from);
          if (!fromEl) return;

          if (c.type === "vertical") {
            const toEl = document.getElementById(c.to);
            if (toEl) drawVerticalLine(svg, fromEl, toEl);
          } else if (c.type === "dogleg") {
            const toEls = c.to
              .map((id) => document.getElementById(id))
              .filter((el) => el);
            if (toEls.length) drawDogleg(svg, fromEl, toEls);
          }
        });
      }

      window.addEventListener("load", drawAllConnections);
      window.addEventListener("resize", drawAllConnections);
    </script>
  </body>
</html>
